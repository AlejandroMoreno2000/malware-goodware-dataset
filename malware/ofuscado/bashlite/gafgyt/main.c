#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

// Declaraciones de las funciones principales de los programas cliente y servidor
int client_main(int argc, unsigned char *argv[]);
int server_main(int argc, char *argv[]);

// Funciones que se ejecutar√°n en hilos separados
void *run_server(void *arg) {
    char *server_args[] = {"server", "666", "10"};
    server_main(3, server_args);
    return NULL;
}

void *run_client(void *arg) {
    unsigned char *client_args[] = {"client"};
    client_main(1, client_args);
    return NULL;
}

int main(int argc, char *argv[]) {
    pthread_t server_thread, client_thread;

    // Crear hilo para el servidor
    if (pthread_create(&server_thread, NULL, run_server, NULL) != 0) {
        fprintf(stderr, "Error al crear el hilo del servidor\n");
        return 1;
    }

    // Crear hilo para el cliente
    if (pthread_create(&client_thread, NULL, run_client, NULL) != 0) {
        fprintf(stderr, "Error al crear el hilo del cliente\n");
        return 1;
    }

    // Esperar a que ambos hilos terminen
    pthread_join(server_thread, NULL);
    pthread_join(client_thread, NULL);

    return 0;
}

